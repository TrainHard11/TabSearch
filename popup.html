<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fuzzy Tab Switcher</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="container">
        <div class="search-area">
            <input type="text" id="searchInput" placeholder="Search tabs..." autofocus>
            <span id="tabCounter" class="tab-counter"></span>
        </div>
        <ul id="tabList"></ul>

        <div class="info-text">
            Press F1 for Settings, F2 for Help, F3 for Keymaps.
        </div>

        <div id="optionsSection" class="options-container hidden">
            <h2>Extension Options</h2>
            <div class="option-item">
                <input type="checkbox" id="enableWebNavigator">
                <label for="enableWebNavigator">Enable Web Search Navigator</label>
            </div>
            <div class="option-item">
                <input type="checkbox" id="searchOnNoResults">
                <label for="searchOnNoResults">Search on Enter if no results</label>
            </div>

            <div class="custom-tab-section">
                <div class="custom-tab-header">
                    <h3>Custom Tab 1</h3>
                    <div class="option-item">
                        <input type="checkbox" id="customTab1ExactMatch">
                        <label for="customTab1ExactMatch">Exact Match</label>
                    </div>
                </div>
                <input type="text" id="customTab1Url" placeholder="Enter URL for Custom Tab 1">
            </div>

            <div class="custom-tab-section">
                <div class="custom-tab-header">
                    <h3>Custom Tab 2</h3>
                    <div class="option-item">
                        <input type="checkbox" id="customTab2ExactMatch">
                        <label for="customTab2ExactMatch">Exact Match</label>
                    </div>
                </div>
                <input type="text" id="customTab2Url" placeholder="Enter URL for Custom Tab 2">
            </div>

            <div class="custom-tab-section">
                <div class="custom-tab-header">
                    <h3>Custom Tab 3</h3>
                    <div class="option-item">
                        <input type="checkbox" id="customTab3ExactMatch">
                        <label for="customTab3ExactMatch">Exact Match</label>
                    </div>
                </div>
                <input type="text" id="customTab3Url" placeholder="Enter URL for Custom Tab 3">
            </div>

            <div class="custom-tab-section">
                <div class="custom-tab-header">
                    <h3>Custom Tab 4</h3>
                    <div class="option-item">
                        <input type="checkbox" id="customTab4ExactMatch">
                        <label for="customTab4ExactMatch">Exact Match</label>
                    </div>
                </div>
                <input type="text" id="customTab4Url" placeholder="Enter URL for Custom Tab 4">
            </div>

            <div class="custom-tab-section">
                <div class="custom-tab-header">
                    <h3>Custom Tab 5</h3>
                    <div class="option-item">
                        <input type="checkbox" id="customTab5ExactMatch">
                        <label for="customTab5ExactMatch">Exact Match</label>
                    </div>
                </div>
                <input type="text" id="customTab5Url" placeholder="Enter URL for Custom Tab 5">
            </div>

            <div class="custom-tab-section">
                <div class="custom-tab-header">
                    <h3>Custom Tab 6</h3>
                    <div class="option-item">
                        <input type="checkbox" id="customTab6ExactMatch">
                        <label for="customTab6ExactMatch">Exact Match</label>
                    </div>
                </div>
                <input type="text" id="customTab6Url" placeholder="Enter URL for Custom Tab 6">
            </div>

            <div class="custom-tab-section">
                <div class="custom-tab-header">
                    <h3>Custom Tab 7</h3>
                    <div class="option-item">
                        <input type="checkbox" id="customTab7ExactMatch">
                        <label for="customTab7ExactMatch">Exact Match</label>
                    </div>
                </div>
                <input type="text" id="customTab7Url" placeholder="Enter URL for Custom Tab 7">
            </div>

            <p class="settings-hint">Press F1 again to hide options.</p>
        </div>

        <div id="helpSection" class="help-container hidden">
            <h1>Fuzzy Tab & Search Navigator Help</h1>

            <p>This extension helps you navigate Chrome tabs and Google search results more efficiently.</p>

            <section class="help-section">
                <h2>Tab Search (Popup)</h2>
                <ul>
                    <li><strong>Open Popup:</strong> Use the extension icon or the configured shortcut (default: <code>Alt+A</code>).</li>
                    <li><strong>Search:</strong> Start typing to fuzzy search through your open tabs by title or URL.</li>
                    <li><strong>Navigate Results:</strong>
                        <ul>
                            <li><code>Arrow Up</code> / <code>Alt+K</code>: Move selection up.</li>
                            <li><code>Arrow Down</code> / <code>Alt+J</code>: Move selection down.</li>
                        </ul>
                    </li>
                    <li><strong>Switch Tab:</strong> Press <code>Enter</code> on a selected tab to switch to it.</li>
                    <li><strong>Search Google:</strong> If no tabs match your query and the "Search on Enter if no results" setting is enabled, pressing <code>Enter</code> will open a new Google search tab with your query.</li>
                    <li><strong>Delete Tab:</strong>
                        <ul>
                            <li><code>Delete</code> key: Close the currently selected tab.</li>
                            <li><code>Ctrl+D</code>: Close the currently selected tab.</li>
                            <li><code>Ctrl+Shift+D</code>: Close ALL filtered tabs. Use with caution!</li>
                        </ul>
                    </li>
                </ul>
            </section>

            <section class="help-section">
                <h2>Web Search Navigator (Google Search Pages)</h2>
                <p>When on a Google search results page, this feature allows you to navigate results using keyboard shortcuts:</p>
                <ul>
                    <li><strong>Enable/Disable:</strong> Can be toggled in the extension settings (F1).</li>
                    <li><strong>Navigate Results:</strong>
                        <ul>
                            <li><code>Arrow Up</code>: Move arrow cursor to the previous search result.</li>
                            <li><code>Arrow Down</code>: Move arrow cursor to the next search result.</li>
                        </ul>
                    </li>
                    <li><strong>Open Link:</strong>
                        <ul>
                            <li><code>Enter</code>: Open the link marked by the arrow cursor in the current tab.</li>
                            <li><code>Ctrl+Enter</code>: Open the link marked by the arrow cursor in a new background tab.</li>
                        </ul>
                    </li>
                </ul>
            </section>

            <section class="help-section">
                <h2>Customizing Keyboard Shortcuts</h2>
                <p>While the extension provides default keymaps, you can customize almost all of them to your preference within your browser's extension settings. You can directly open this settings page:</p>
                <ul>
                    <li><strong>Press <code>F3</code></strong> in the extension popup to go directly to the keyboard shortcuts configuration page.</li>
                </ul>
                <h3>For Google Chrome:</h3>
                <ol>
                    <li>Type <code>chrome://extensions/shortcuts</code> into your Chrome address bar and press Enter, OR press <code>F3</code> in the popup.</li>
                    <li>Find "Fuzzy Tab & Search Navigator" in the list.</li>
                    <li>Click the edit icon (pencil) next to each command to set your desired keyboard shortcut.</li>
                    <li>Most commands can be assigned a global shortcut (works even when Chrome is not focused) or in-Chrome only.</li>
                </ol>
                <h3>For Mozilla Firefox:</h3>
                <ol>
                    <li>Type <code>about:addons</code> into your Firefox address bar and press Enter, then navigate to "Manage Extension Shortcuts", OR press <code>F3</code> in the popup (this will take you to <code>about:addons</code>).</li>
                    <li>In the Add-ons Manager, click on "Extensions" on the left sidebar.</li>
                    <li>Find "Fuzzy Tab & Search Navigator" and click on its "Options" or "Preferences" (if available, otherwise proceed to step 4).</li>
                    <li>Alternatively, click the gear icon (⚙️) on the top right of the Add-ons Manager and select "Manage Extension Shortcuts".</li>
                    <li>Here you can view and edit the shortcuts for "Fuzzy Tab & Search Navigator" and other extensions.</li>
                </ol>
            </section>

            <section class="help-section">
                <h2>Global Shortcuts (Configurable in Browser)</h2>
                <p>These commands can be assigned keyboard shortcuts in your browser's extension settings (see "Customizing Keyboard Shortcuts" above).</p>
                <ul>
                    <li><code>Open Fuzzy Tab Switcher</code>: (Default: <code>Alt+A</code>)</li>
                    <li><code>Custom Tab 1</code> to <code>Custom Tab 7</code>: Open or focus your custom defined tabs. Configure these URLs in the extension settings (F1).</li>
                    <li><code>Move current tab to the left</code></li>
                    <li><code>Move current tab to the right</code></li>
                    <li><code>Cycle media tabs</code></li>
                    <li><code>Move tab to 1st place</code></li>
                    <li><code>Move tab to 2nd place</code></li>
                    <li><code>Move tab to 3rd place</code></li>
                    <li><code>Move tab to 4th place</code></li>
                    <li><code>New empty tab</code></li>
                    <li><code>Cycle tabs playing audio</code></li>
                    <li><code>Cycle YouTube tabs</code></li>
                </ul>
            </section>

            <section class="help-section">
                <h2>Settings (F1)</h2>
                <p>Press <code>F1</code> in the extension popup to toggle the settings menu. Here you can:</p>
                <ul>
                    <li>Toggle the "Enable Web Search Navigator" feature.</li>
                    <li>Toggle "Search on Enter if no results".</li>
                    <li><strong>Configure Custom Tabs (1-7):</strong> Enter URLs for your custom tab shortcuts.</li>
                    <li><strong>Exact URL Match:</strong> For each custom tab, use the checkbox next to the section title to determine if the tab should be matched by its exact URL or if a partial match (URL starts with the entered string) is sufficient.</li>
                </ul>
            </section>
            <section class="help-section">
                <h2>General Information</h2>
                <p>The extension icon in your browser toolbar also opens the tab switcher popup.</p>
                <p>Your settings are saved automatically.</p>
            </section>

            <p class="settings-hint">Press F2 again to hide help.</p>

            <div class="help-footer">
                <p>© 2025 Fuzzy Tab & Search Navigator</p>
            </div>
        </div>
    </div>
    <script src="popup.js"></script>
</body>
</html>
